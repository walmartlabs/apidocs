<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>com.walmartlabs.lacinia.pedestal.interceptors documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Lacinia-pedestal</span> <span class="project-version">0.5.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>com</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>walmartlabs</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lacinia</span></div></div></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-4"><a href="com.walmartlabs.lacinia.pedestal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pedestal</span></div></a></li><li class="depth-5 branch current"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interceptors</span></div></a></li><li class="depth-5"><a href="com.walmartlabs.lacinia.pedestal.subscriptions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>subscriptions</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-as-dependency-map"><div class="inner"><span>as-dependency-map</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-dependencies"><div class="inner"><span>dependencies</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-order-by-dependency"><div class="inner"><span>order-by-dependency</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-ordered-after"><div class="inner"><span>ordered-after</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-splice"><div class="inner"><span>splice</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">com.walmartlabs.lacinia.pedestal.interceptors</h1><h4 class="added">added in 0.3.0</h4><div class="doc"><div class="markdown"><p>Utilities for building interceptor chains that are ordered based on dependencies.</p></div></div><div class="public anchor" id="var-as-dependency-map"><h3>as-dependency-map</h3><div class="usage"><code>(as-dependency-map interceptors)</code></div><div class="doc"><div class="markdown"><p>Given a seq of interceptors, returns a map of the interceptors keyed on the :name of each interceptor. This can then be passed to <a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-order-by-dependency">order-by-dependency</a>.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/pedestal-lacinia/blob/master/src/com/walmartlabs/lacinia/pedestal/interceptors.clj#L60">view source</a></div></div><div class="public anchor" id="var-dependencies"><h3>dependencies</h3><div class="usage"><code>(dependencies interceptor)</code></div><div class="doc"><div class="markdown"><p>Returns the set of dependencies for an interceptor, as provided by <a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-ordered-after">ordered-after</a>.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/pedestal-lacinia/blob/master/src/com/walmartlabs/lacinia/pedestal/interceptors.clj#L25">view source</a></div></div><div class="public anchor" id="var-order-by-dependency"><h3>order-by-dependency</h3><div class="usage"><code>(order-by-dependency dependency-map)</code></div><div class="doc"><div class="markdown"><p>Orders an interceptor <em>map</em> by dependencies. The keys of the map are arbitrary keywords (generally the same as the :name key of the interceptor map), and each value is an interceptor that has been augmented via <a href="com.walmartlabs.lacinia.pedestal.interceptors.html#var-ordered-after">ordered-after</a>.</p>
<p>The result is an ordered list of just the non-empty interceptors.</p>
<p>By intention, it is possible to remove an interceptor before ordering by <code>assoc</code>-ing nil, or an empty map, into the dependency map. The distinction between nil and empty exists because an empty map can still have dependencies on other interceptors, but nil can not, which may affect the ordering of intereceptors that depend on the removed interceptor.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/pedestal-lacinia/blob/master/src/com/walmartlabs/lacinia/pedestal/interceptors.clj#L30">view source</a></div></div><div class="public anchor" id="var-ordered-after"><h3>ordered-after</h3><div class="usage"><code>(ordered-after interceptor dependencies)</code></div><div class="doc"><div class="markdown"><p>Adds metadata to an interceptor to identify its dependencies. The interceptor will be ordered after all of its dependencies.</p>
<p>Dependencies are a seq of keywords.</p>
<p>ordered-after is additive, invoking it multiple times will accumulate dependencies.</p>
<p>Returns the interceptor with updated metadata.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/pedestal-lacinia/blob/master/src/com/walmartlabs/lacinia/pedestal/interceptors.clj#L7">view source</a></div></div><div class="public anchor" id="var-splice"><h3>splice</h3><h4 class="added">added in 0.4.0</h4><div class="usage"><code>(splice dependency-map interceptor-name replacement)</code></div><div class="doc"><div class="markdown"><p>Overwrites an existing interceptor in the map with a replacement interceptor.</p>
<p>Throws an exception if the interceptor does not already exist.</p>
<p>The replacementâ€™s dependencies are merged with the dependency it is replacing: this ensures that interceptor ordering is not affected, even if it was based on transitive dependencies through the replaced interceptor.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/pedestal-lacinia/blob/master/src/com/walmartlabs/lacinia/pedestal/interceptors.clj#L66">view source</a></div></div></div></body></html>