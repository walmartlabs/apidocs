<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>com.walmartlabs.schematic documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Schematic</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="com.walmartlabs.schematic.html"><div class="inner"><span>com.walmartlabs.schematic</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-apply-merge-defs"><div class="inner"><span>apply-merge-defs</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-assemble-system"><div class="inner"><span>assemble-system</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-associate-dependency-metadata"><div class="inner"><span>associate-dependency-metadata</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-dependency-graph"><div class="inner"><span>dependency-graph</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-find-create-fn-namespaces"><div class="inner"><span>find-create-fn-namespaces</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-find-merge-defs"><div class="inner"><span>find-merge-defs</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-load-namespaces.21"><div class="inner"><span>load-namespaces!</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merge-def-root"><div class="inner"><span>merge-def-root</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merge-errors-of-type"><div class="inner"><span>merge-errors-of-type</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merge-value"><div class="inner"><span>merge-value</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merged-config"><div class="inner"><span>merged-config</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merged-subconfig"><div class="inner"><span>merged-subconfig</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-merges-dependency-graph"><div class="inner"><span>merges-dependency-graph</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-missing-refs"><div class="inner"><span>missing-refs</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-normalize-merge-def"><div class="inner"><span>normalize-merge-def</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-ref-dependency-graph"><div class="inner"><span>ref-dependency-graph</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-ref-map-for-component"><div class="inner"><span>ref-map-for-component</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-referred-component-ids"><div class="inner"><span>referred-component-ids</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-resolve-init-fn"><div class="inner"><span>resolve-init-fn</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-subconfig-for-components"><div class="inner"><span>subconfig-for-components</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-throw-on-merge-errors"><div class="inner"><span>throw-on-merge-errors</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-throw-on-missing-refs"><div class="inner"><span>throw-on-missing-refs</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.schematic.html#var-validate-config.21"><div class="inner"><span>validate-config!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">com.walmartlabs.schematic</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-apply-merge-defs"><h3>apply-merge-defs</h3><div class="usage"><code>(apply-merge-defs m config node-id)</code></div><div class="doc"><div class="markdown"><p>Applies an optional :sc/merge declaration in m</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L231">view source</a></div></div><div class="public anchor" id="var-assemble-system"><h3>assemble-system</h3><div class="usage"><code>(assemble-system config)</code><code>(assemble-system config component-ids)</code></div><div class="doc"><div class="markdown"><p>Assembles config into a system-map which can be used with <code>com.stuartsierra.component/start</code>.</p>
<p>config - configuration for the system component-ids - a sequence of component ids. When provided, only the neccessary . parts of the system map to support those components will be inlcluded . in the final system map. . Default: all keys in the system</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L286">view source</a></div></div><div class="public anchor" id="var-associate-dependency-metadata"><h3>associate-dependency-metadata</h3><div class="usage"><code>(associate-dependency-metadata v)</code></div><div class="doc"><div class="markdown"><p>If v is an associative structure, finds any declared dependencies and associates appropriate Component metadata. If it is not associative, the original value is returned. Any pre-existing ::component/dependencies will be removed. </p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L61">view source</a></div></div><div class="public anchor" id="var-dependency-graph"><h3>dependency-graph</h3><div class="usage"><code>(dependency-graph config find-dep-fn)</code></div><div class="doc"><div class="markdown"><p>Creates a dependency graph with dependencies identified by find-dep-fn</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L24">view source</a></div></div><div class="public anchor" id="var-find-create-fn-namespaces"><h3>find-create-fn-namespaces</h3><div class="usage"><code>(find-create-fn-namespaces config)</code></div><div class="doc"><div class="markdown"><p>Returns a collection of symbols representing the namespaces of :sc/create-fn functions.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L100">view source</a></div></div><div class="public anchor" id="var-find-merge-defs"><h3>find-merge-defs</h3><div class="usage"><code>(find-merge-defs v)</code></div><div class="doc"><div class="markdown"><p>Finds extracts merge-defs in v, if any. A merge-def is declared via <code>:sc/merge</code>.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L224">view source</a></div></div><div class="public anchor" id="var-load-namespaces.21"><h3>load-namespaces!</h3><div class="usage"><code>(load-namespaces! config)</code></div><div class="doc"><div class="markdown"><p>Automatically loads namespaces used in :sc/create-fn’s. For convenience in threading macros, returns the config.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L110">view source</a></div></div><div class="public anchor" id="var-merge-def-root"><h3>merge-def-root</h3><div class="usage"><code>(merge-def-root merge-def)</code></div><div class="doc"><div class="markdown"><p>Given a merge definition, return the root element of the data to be copied/merged. The root element is the first key in the path to the the source data.</p>
<p>The following definitions all have a root of :foo</p>
<blockquote>
  <p>:foo  {:from :foo}  {:from [:foo :bar]}</p>
</blockquote></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L145">view source</a></div></div><div class="public anchor" id="var-merge-errors-of-type"><h3>merge-errors-of-type</h3><div class="usage"><code>(merge-errors-of-type error-type errors)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L158">view source</a></div></div><div class="public anchor" id="var-merge-value"><h3>merge-value</h3><div class="usage"><code>(merge-value component-config component-id merge-def config)</code></div><div class="doc"><div class="markdown"><p>Evaluates the merge definition and applies the change to the component config. Note, the semantics for selecting/renaming keys is the inverse of clojure.set/rename-keys. This is due to the fact that Component declares dependencies using {:local :system} semantics, so the same principle was used for merging maps in order to have a consistent “api”.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L188">view source</a></div></div><div class="public anchor" id="var-merged-config"><h3>merged-config</h3><div class="usage"><code>(merged-config config)</code></div><div class="doc"><div class="markdown"><p>For the provided config, replaces instances of :sc/merge with resolved values.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L268">view source</a></div></div><div class="public anchor" id="var-merged-subconfig"><h3>merged-subconfig</h3><div class="usage"><code>(merged-subconfig config)</code><code>(merged-subconfig config component-ids)</code></div><div class="doc"><div class="markdown"><p>Applies any merge definitions, then selects just the specified subset of components.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L277">view source</a></div></div><div class="public anchor" id="var-merges-dependency-graph"><h3>merges-dependency-graph</h3><div class="usage"><code>(merges-dependency-graph config)</code></div><div class="doc"><div class="markdown"><p>Return a dependency graph of all the merge-defs in a config.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L239">view source</a></div></div><div class="public anchor" id="var-missing-refs"><h3>missing-refs</h3><div class="usage"><code>(missing-refs config)</code></div><div class="doc"><div class="markdown"><p>Finds refs which are missing for the supplied component-ids</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L41">view source</a></div></div><div class="public anchor" id="var-normalize-merge-def"><h3>normalize-merge-def</h3><div class="usage"><code>(normalize-merge-def merge-def)</code></div><div class="doc"><div class="markdown"><p>Converts a merge definition to a standard form, which is: {:to [:bar] :from [:foo] :select {:my-host :host}} or {:to [] :from [:foo] :select :all}</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L121">view source</a></div></div><div class="public anchor" id="var-ref-dependency-graph"><h3>ref-dependency-graph</h3><div class="usage"><code>(ref-dependency-graph config)</code></div><div class="doc"><div class="markdown"><p>Return a dependency graph of all the refs in a config.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L82">view source</a></div></div><div class="public anchor" id="var-ref-map-for-component"><h3>ref-map-for-component</h3><div class="usage"><code>(ref-map-for-component v)</code></div><div class="doc"><div class="markdown"><p>Finds refs declared in the component v and returns a map of local-names to system refs</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L48">view source</a></div></div><div class="public anchor" id="var-referred-component-ids"><h3>referred-component-ids</h3><div class="usage"><code>(referred-component-ids component-config)</code></div><div class="doc"><div class="markdown"><p>Returns a sequence of component-id’s for refs declared in component-config</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L34">view source</a></div></div><div class="public anchor" id="var-resolve-init-fn"><h3>resolve-init-fn</h3><div class="usage"><code>(resolve-init-fn m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L53">view source</a></div></div><div class="public anchor" id="var-subconfig-for-components"><h3>subconfig-for-components</h3><div class="usage"><code>(subconfig-for-components system-config component-ids)</code></div><div class="doc"><div class="markdown"><p>Returns a map of just the given components and their transitive dependencies</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L255">view source</a></div></div><div class="public anchor" id="var-throw-on-merge-errors"><h3>throw-on-merge-errors</h3><div class="usage"><code>(throw-on-merge-errors config)</code></div><div class="doc"><div class="markdown"><p>Examines the metadata of the provided config. If any ::merge-errors are found, they are collapsed into a single set of data which is thrown in an exception.</p>
<p>Note: the config passed to this function may represent only a subset of the overall possible config. It is possible that other parts of the overall config had merge-errors. But since those parts were removed from this config, they will not adversely affect the ability to use <em>this</em> config to create and start a System.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L162">view source</a></div></div><div class="public anchor" id="var-throw-on-missing-refs"><h3>throw-on-missing-refs</h3><div class="usage"><code>(throw-on-missing-refs config)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L76">view source</a></div></div><div class="public anchor" id="var-validate-config.21"><h3>validate-config!</h3><div class="usage"><code>(validate-config! config)</code></div><div class="doc"><div class="markdown"><p>Validates various aspects of the config, throwing an exception for any issues found. For convenience in threading macros, returns the config.</p></div></div><div class="src-link"><a href="https://github.com/walmartlabs/schematic/blob/master/src/com/walmartlabs/schematic.clj#L246">view source</a></div></div></div></body></html>