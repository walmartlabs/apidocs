<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>com.walmartlabs.lacinia.util documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">com.walmartlabs/lacinia</span> <span class="project-version">1.2-alpha-3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>com</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>walmartlabs</span></div></div></li><li class="depth-3"><a href="com.walmartlabs.lacinia.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lacinia</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.executor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>executor</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.expound.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expound</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.federation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>federation</span></div></a></li><li class="depth-4"><a href="com.walmartlabs.lacinia.parser.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parser</span></div></a></li><li class="depth-5 branch"><a href="com.walmartlabs.lacinia.parser.docs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>docs</span></div></a></li><li class="depth-5"><a href="com.walmartlabs.lacinia.parser.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.resolve.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>resolve</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.selection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>selection</span></div></a></li><li class="depth-4 branch"><a href="com.walmartlabs.lacinia.tracing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracing</span></div></a></li><li class="depth-4 current"><a href="com.walmartlabs.lacinia.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-as-error-map"><div class="inner"><span>as-error-map</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-attach-resolvers"><div class="inner"><span>attach-resolvers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-attach-scalar-transformers"><div class="inner"><span>attach-scalar-transformers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-attach-streamers"><div class="inner"><span>attach-streamers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-inject-descriptions"><div class="inner"><span>inject-descriptions</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-inject-enum-transformers"><div class="inner"><span>inject-enum-transformers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-inject-resolvers"><div class="inner"><span>inject-resolvers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-inject-scalar-transformers"><div class="inner"><span>inject-scalar-transformers</span></div></a></li><li class="depth-1"><a href="com.walmartlabs.lacinia.util.html#var-inject-streamers"><div class="inner"><span>inject-streamers</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">com.walmartlabs.lacinia.util</h1><div class="doc"><div class="markdown"><p>Useful utility functions.</p>
</div></div><div class="public anchor" id="var-as-error-map"><h3>as-error-map</h3><h4 class="added">added in 0.16.0</h4><div class="usage"><code>(as-error-map t)</code><code>(as-error-map t more-data)</code></div><div class="doc"><div class="markdown"><p>Converts an exception into an error map, including a :message key, plus any additional keys and values via <code>ex-data</code>.</p>
<p>In the second arity, a further map of values to be merged into the error map can be provided.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L143">view source</a></div></div><div class="public anchor" id="var-attach-resolvers"><h3>attach-resolvers</h3><div class="usage"><code>(attach-resolvers schema resolver-m)</code></div><div class="doc"><div class="markdown"><p>Given a GraphQL schema and a map of keywords to resolver fns, replace each placeholder keyword in the schema with the actual resolver fn.</p>
<p>resolver-m is a map from of resolver functions and resolver function factories. The keys are usually keywords, but may be any value including string or symbol.</p>
<p>When the value in the :resolve key is a simjple value, it is simply replaced with the corresponding resolver function from resolver-m.</p>
<p>Alternately, the :resolve value may be a seq, indicating a resolver factory.</p>
<p>The first value in the seq is used to select the resolver factory function, which is then invoked, via <code>apply</code>, with the remaining values in the seq.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L56">view source</a></div></div><div class="public anchor" id="var-attach-scalar-transformers"><h3>attach-scalar-transformers</h3><div class="usage"><code>(attach-scalar-transformers schema transform-m)</code></div><div class="doc"><div class="markdown"><p>Given a GraphQL schema, attaches functions in the transform-m map to the schema.</p>
<p>Inside each scalar definition, the :parse and :serialize keys are replaced with values from the transform-m map.</p>
<p>In the initial schema, use a keyword for the :parse and :serialize keys, then provide a corresponding value in transform-m.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L89">view source</a></div></div><div class="public anchor" id="var-attach-streamers"><h3>attach-streamers</h3><h4 class="added">added in 0.19.0</h4><div class="usage"><code>(attach-streamers schema streamer-map)</code></div><div class="doc"><div class="markdown"><p>Attaches stream handler functions to subscriptions.</p>
<p>Replaces the :stream key inside subscription operations using the same logic as <a href="com.walmartlabs.lacinia.util.html#var-attach-resolvers">attach-resolvers</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L80">view source</a></div></div><div class="public anchor" id="var-inject-descriptions"><h3>inject-descriptions</h3><h4 class="added">added in 0.27.0</h4><div class="usage"><code>(inject-descriptions schema documentation)</code></div><div class="doc"><div class="markdown"><p>Injects documentation into a schema, as <code>:description</code> keys on various elements within the schema.</p>
<p>The documentation map keys are keywords with a particular structure, and the values are formatted Markdown strings.</p>
<p>The keys are one of the following forms:</p>
<ul>
<li><code>:Type</code></li>
<li><code>:Type/name</code></li>
<li><code>:Type/name.argument</code></li>
</ul>
<p>A simple <code>Type</code> will document an object, input object, interface, union, or enum.</p>
<p>The second form is used to document a field of an object, input object, or interface, or to document a specific value of an enum (e.g., <code>:Episode/NEW_HOPE</code>).</p>
<p>The final form is used to document an argument to a field (it does not make sense for enums).</p>
<p>Additionally, the <code>Type</code> can be <code>queries</code>, <code>mutations</code>, or <code>subscriptions</code>, in which case the <code>name</code> will be the name of the operation (e.g., <code>:queries/episode</code>).</p>
<p>An exception is thrown if an element identified by a key does not exist.</p>
<p>See <a href="com.walmartlabs.lacinia.parser.docs.html#var-parse-docs">parse-docs</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L160">view source</a></div></div><div class="public anchor" id="var-inject-enum-transformers"><h3>inject-enum-transformers</h3><h4 class="added">added in 0.36.0</h4><div class="usage"><code>(inject-enum-transformers schema transform-m)</code></div><div class="doc"><div class="markdown"><p>Given a GraphQL schema, injects transformers for enums into the schema.</p>
<p>transform-m maps from the scalar name (a keyword) to a map with keys :parse and/or :serialize; these are applied to the Enum.</p>
<p>Each enum must exist, or an exception is thrown.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L106">view source</a></div></div><div class="public anchor" id="var-inject-resolvers"><h3>inject-resolvers</h3><h4 class="added">added in 0.27.0</h4><div class="usage"><code>(inject-resolvers schema resolvers)</code></div><div class="doc"><div class="markdown"><p>Adds resolvers to the schema.  The resolvers map is a map of keywords to field resolvers (as functions, or <a href="com.walmartlabs.lacinia.resolve.html#var-FieldResolver">FieldResolver</a> instances).</p>
<p>The key identifies where the resolver should be added, in the form <code>:Type/field</code>.</p>
<p>Alternately, the key may be of the format <code>:queries/name</code> (or <code>:mutations/name</code> or <code>:subscriptions/name</code>).</p>
<p>Throws an exception if the target of the resolver can’t be found.</p>
<p>In many cases, this is a full replacement for <a href="com.walmartlabs.lacinia.util.html#var-attach-resolvers">attach-resolvers</a>, but the two functions can also be used in conjunction with each other.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L193">view source</a></div></div><div class="public anchor" id="var-inject-scalar-transformers"><h3>inject-scalar-transformers</h3><h4 class="added">added in 0.37.0</h4><div class="usage"><code>(inject-scalar-transformers schema transform-m)</code></div><div class="doc"><div class="markdown"><p>Given a GraphQL schema, injects transformers for scalars into the schema.</p>
<p>transform-m maps from the scalar name (a keyword) to a map with keys :parse and :serialize; these are applied to the Enum.</p>
<p>Each scalar must exist, or an exception is thrown.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L125">view source</a></div></div><div class="public anchor" id="var-inject-streamers"><h3>inject-streamers</h3><h4 class="added">added in 0.37.0</h4><div class="usage"><code>(inject-streamers schema streamers)</code></div><div class="doc"><div class="markdown"><p>As <a href="com.walmartlabs.lacinia.util.html#var-inject-resolvers">inject-resolvers</a> but the updated key is :stream, thereby supplying a subscription streamer function.</p>
</div></div><div class="src-link"><a href="https://github.com/walmartlabs/lacinia/blob/master/src/com/walmartlabs/lacinia/util.clj#L213">view source</a></div></div></div></body></html>